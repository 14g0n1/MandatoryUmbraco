@inherits Umbraco.Web.Mvc.UmbracoTemplatePage<ContentModels.Members>
@using ContentModels = Umbraco.Web.PublishedContentModels;
@{
    Layout = "Master.cshtml";
}

@{
    var memberService = ApplicationContext.Current.Services.MemberService;
    var activeMembers = memberService.GetMembersByGroup("Active members");
    var guestMembers = memberService.GetMembersByGroup("Guests");
}

<h3>Active members: </h3>
@if (activeMembers.Count() > 0)
{
    foreach (var member in activeMembers)
    {
    <p>
        Name: @member.Name<br>
        Address: @member.GetValue("address")<br>
        Zip: @member.GetValue("zip")
        City: @member.GetValue("city")) <br>
        Email: @member.Email<br>
        Skills:

        @if (member.GetValue("skills") != null)
        {
            string[] skills = member.GetValue("skills").ToString().Split(',');
            string skillString = string.Join(", ", from skill in skills select umbraco.library.GetPreValueAsString(Convert.ToInt32(skill)));
        <span> @skillString </span>
        }
    </p>
    }
}
else
{
    <p><i>No active members registered</i></p>
}



<h3>Guest members: </h3>
@if (guestMembers.Count() > 0)
{
    foreach (var member in guestMembers)
    {
    <p>
        Name: @member.Name<br>
        Mobile: @member.GetValue("Mobile")<br>

    </p>
    }
}else{
<p><i>No guest members registered</i></p>
}